(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(t,e,n){t.exports={background:"LoginModal_background__Uuyqh",modal:"LoginModal_modal__2PK2-",input:"LoginModal_input__3Fh8l",remember:"LoginModal_remember__3b5QP"}},26:function(t,e,n){},37:function(t,e,n){t.exports=n.p+"static/media/todolists-preloader.a67153fd.svg"},39:function(t,e,n){t.exports=n.p+"static/media/tasks-preloader.986e54dc.svg"},42:function(t,e,n){t.exports=n(71)},47:function(t,e,n){},71:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(14),s=n.n(r),i=(n(47),n(3)),c=n(10),u=n(5),l=n(4),d=(n(26),n(7)),p=n(37),h=n.n(p),m=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("img",{src:h.a,alt:"loading",style:{marginTop:100}}))},f=function(t){var e=t.isAuth,n=t.userLogout,a=Object(d.c)();return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"header"},e&&o.a.createElement("button",{onClick:function(){a(n)}},"Log out")))},g=n(9),k=n.n(g),b=n(18),L=n(1),T=n(38),v=n.n(T).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1",withCredentials:!0,headers:{"API-KEY":"b29a2be9-93e2-498c-9365-70a515100fee"}}),E=function(t){return v.post("/todo-lists",{title:t}).then(function(t){return t.data})},O=function(){return v.get("/todo-lists").then(function(t){return t.data})},j=function(t,e){return v.put("/todo-lists/".concat(t),{title:e}).then(function(t){return t.data})},C=function(t){return v.delete("/todo-lists/".concat(t)).then(function(t){return t.data})},A=function(t){return v.get("/todo-lists/".concat(t,"/tasks")).then(function(t){return t.data})},I=function(t,e){return v.post("/todo-lists/".concat(e,"/tasks"),{title:t}).then(function(t){return t.data})},F=function(t,e){var n=Object(L.a)(Object(L.a)({},t),e);return v.put("/todo-lists/".concat(t.todoListId,"/tasks/").concat(t.id),n).then(function(t){return t.data})},S=function(t,e){return v.delete("/todo-lists/".concat(t,"/tasks/").concat(e)).then(function(t){return t.data})},y=function(){return v.get("auth/me").then(function(t){return t.data})},w=function(t,e,n){return v.post("auth/login",{email:t,password:e,rememberMe:n}).then(function(t){return t.data})},N=function(){return v.delete("auth/login").then(function(t){return t.data})},D={userId:"",email:"",login:"",isAuth:!1,isAuthFetching:!1},R=function(t,e,n){return{type:"todoList/authReducer/SET-USER-LOGIN-DATA",payload:{userId:t,email:e,login:n}}},M=function(t){return{type:"todoList/authReducer/TOGGLE-IS-AUTH",isAuth:t}},H=function(t){return{type:"todoList/authReducer/AUTH-FETCHING",isAuthFetching:t}},x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"todoList/authReducer/SET-USER-LOGIN-DATA":return Object(L.a)(Object(L.a)({},t),e.payload);case"todoList/authReducer/TOGGLE-IS-AUTH":return Object(L.a)(Object(L.a)({},t),{},{isAuth:e.isAuth});case"todoList/authReducer/AUTH-FETCHING":return Object(L.a)(Object(L.a)({},t),{},{isAuthFetching:e.isAuthFetching});default:return t}},G=n(15),_=n(16),K=function(t){return o.a.createElement("button",{className:"add-item",onClick:t.onClick,disabled:t.disabled},o.a.createElement(G.a,{icon:_.a,className:"plus-icon"}))},U=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={error:!1,item:""},t.onAddItemClick=function(){var e=t.state.item;t.setState({item:""}),""===e?t.setState({error:!0}):(t.setState({error:!1}),t.props.addItem(e))},t.onItemChanged=function(e){t.setState({error:!1,item:e.currentTarget.value})},t.onKeyPress=function(e){"Enter"===e.key&&t.onAddItemClick()},t.render=function(){var e=t.state.error?"error":"";return o.a.createElement("div",{className:"addNewTaskForm"},o.a.createElement("input",{className:e,type:"text",placeholder:t.props.placeholder,onChange:t.onItemChanged,onKeyPress:t.onKeyPress,value:t.state.item}),o.a.createElement(K,{onClick:t.onAddItemClick,disabled:t.props.isFetching}))},t}return n}(o.a.Component),V=function(t){return o.a.createElement("button",{className:"delete-item",onClick:t.onClick},o.a.createElement(G.a,{icon:_.b,className:"trash-icon"}))},P=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={editMode:!1,title:t.props.task.title},t.activateEditMode=function(){t.setState({editMode:!0})},t.deactivateEditMode=function(){t.props.changeTitle(t.props.task,t.state.title),t.setState({editMode:!1})},t.onIsDoneChanged=function(e){var n=e.currentTarget.checked?2:0;t.props.changeStatus(t.props.task,n)},t.onTitleChanged=function(e){t.setState({title:e.currentTarget.value})},t.deleteTask=function(){t.props.deleteTask(t.props.task.id)},t.render=function(){var e=t.props.task.status,n=2===e?"taskDone":"";return o.a.createElement("div",{className:"todoList-task"},o.a.createElement("input",{onChange:t.onIsDoneChanged,type:"checkbox",checked:2===e}),t.state.editMode?o.a.createElement("input",{value:t.state.title,autoFocus:!0,onBlur:t.deactivateEditMode,onChange:t.onTitleChanged}):o.a.createElement("span",{onClick:t.activateEditMode,className:n},t.state.title),o.a.createElement(V,{onClick:t.deleteTask}))},t}return n}(o.a.Component),B=n(39),W=n.n(B),J=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("img",{src:W.a,alt:"loading",style:{width:90,height:24}}))},Y=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).render=function(){var e=t.props.tasks.map(function(e){return o.a.createElement(P,{task:e,changeStatus:t.props.changeStatus,changeTitle:t.props.changeTitle,key:e.id,deleteTask:t.props.deleteTask})});return o.a.createElement("div",{className:"todoList-tasks"},t.props.tasksIsFetching?o.a.createElement(J,null):e)},t}return n}(o.a.Component),q=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={isHidden:!1},t.onHideFilterClick=function(){t.setState({isHidden:!0})},t.onShowFilterClick=function(){t.setState({isHidden:!1})},t.onAllFilterClick=function(){t.props.changeFilter("All")},t.onCompletedFilterClick=function(){t.props.changeFilter("Completed")},t.onActiveFilterClick=function(){t.props.changeFilter("Active")},t.render=function(){var e="All"===t.props.filterValue?"filter-active":"",n="Completed"===t.props.filterValue?"filter-active":"",a="Active"===t.props.filterValue?"filter-active":"";return o.a.createElement("div",{className:"todoList-footer"},!t.state.isHidden&&o.a.createElement("div",null,o.a.createElement("button",{onClick:t.onAllFilterClick,className:e},"All"),o.a.createElement("button",{onClick:t.onCompletedFilterClick,className:n},"Completed"),o.a.createElement("button",{onClick:t.onActiveFilterClick,className:a},"Active")),!t.state.isHidden&&o.a.createElement("span",{className:"showHide",onClick:t.onHideFilterClick},"hide buttons"),t.state.isHidden&&o.a.createElement("span",{className:"showHide",onClick:t.onShowFilterClick},"show buttons"))},t}return n}(o.a.Component),z=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={editMode:!1,title:t.props.title},t.activateEditMode=function(){t.setState({editMode:!0})},t.deactivateEditMode=function(){t.props.changeTodoListTitle(t.state.title),t.setState({editMode:!1})},t.onTitleChanged=function(e){t.setState({title:e.currentTarget.value})},t.render=function(){return o.a.createElement(o.a.Fragment,null,t.state.editMode?o.a.createElement("input",{value:t.state.title,autoFocus:!0,onBlur:t.deactivateEditMode,onChange:t.onTitleChanged}):o.a.createElement("h3",{className:"todoList-header__title",onClick:t.activateEditMode},t.state.title))},t}return n}(o.a.Component),Q=n(24),$="todoList/tasksReducer/ADD-TASK",X="todoList/tasksReducer/SET-TASKS",Z={todoLists:[],todoListsIsFetching:!1},tt=function(t){return{type:"todoList/tasksReducer/TODOLISTS-IS-FETCHING",isFetching:t}},et=function(t,e){return{type:"todoList/tasksReducer/TASKS-IS-FETCHING",todoListId:t,isFetching:e}},nt=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"todoList/tasksReducer/ADD-TODOLIST":return t=[].concat(Object(Q.a)(e.todoLists),[n.newTodoList]),Object(L.a)(Object(L.a)({},e),{},{todoLists:t});case $:return t=e.todoLists.map(function(t){return t.id!==n.newTask.todoListId?t:Object(L.a)(Object(L.a)({},t),{},{tasks:[].concat(Object(Q.a)(t.tasks),[n.newTask])})}),Object(L.a)(Object(L.a)({},e),{},{todoLists:t});case"todoList/tasksReducer/CHANGE-TASK":return t=e.todoLists.map(function(t){return t.id!==n.task.todoListId?t:Object(L.a)(Object(L.a)({},t),{},{tasks:t.tasks.map(function(t){return t.id!==n.task.id?t:Object(L.a)({},n.task)})})}),Object(L.a)(Object(L.a)({},e),{},{todoLists:t});case"todoList/tasksReducer/DELETE-TODOLIST":return t=e.todoLists.filter(function(t){return t.id!==n.todoListId}),Object(L.a)(Object(L.a)({},e),{},{todoLists:t});case"todoList/tasksReducer/DELETE-TASK":return t=e.todoLists.map(function(t){return t.id!==n.todoListId?t:Object(L.a)(Object(L.a)({},t),{},{tasks:t.tasks.filter(function(t){return t.id!==n.taskId})})}),Object(L.a)(Object(L.a)({},e),{},{todoLists:t});case"todoList/tasksReducer/SET-TODOLISTS":return Object(L.a)(Object(L.a)({},e),{},{todoLists:n.todoLists.map(function(t){return Object(L.a)(Object(L.a)({},t),{},{tasks:[],taskIsFetching:!1})})});case X:return Object(L.a)(Object(L.a)({},e),{},{todoLists:e.todoLists.map(function(t){return t.id===n.todoListId?Object(L.a)(Object(L.a)({},t),{},{tasks:n.tasks}):t})});case"todoList/tasksReducer/CHANGE-TODOLIST-TITLE":return Object(L.a)(Object(L.a)({},e),{},{todoLists:e.todoLists.map(function(t){return t.id===n.todoListId?Object(L.a)(Object(L.a)({},t),{},{title:n.newTitle}):t})});case"todoList/tasksReducer/TODOLISTS-IS-FETCHING":return Object(L.a)(Object(L.a)({},e),{},{todoListsIsFetching:n.isFetching});case"todoList/tasksReducer/TASKS-IS-FETCHING":return Object(L.a)(Object(L.a)({},e),{},{todoLists:e.todoLists.map(function(t){return t.id===n.todoListId?Object(L.a)(Object(L.a)({},t),{},{taskIsFetching:n.isFetching}):t})});default:return e}},at=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={filterValue:"All"},t.restoreState=function(){t.props.getTasks(t.props.id)},t.deleteTodoList=function(){t.props.deleteTodoList(t.props.id)},t.changeTodoListTitle=function(e){t.props.changeTodoListTitle(t.props.id,e)},t.addTask=function(e){t.props.addTask(t.props.id,e)},t.deleteTask=function(e){t.props.deleteTask(t.props.id,e)},t.taskFilter=function(e){return e.filter(function(e){return"All"===t.state.filterValue||("Completed"===t.state.filterValue?2===e.status:"Active"===t.state.filterValue?0===e.status:void 0)})},t.changeFilter=function(e){t.setState({filterValue:e})},t.changeStatus=function(e,n){t.props.changeTask(e,{status:n})},t.changeTitle=function(e,n){t.props.changeTask(e,{title:n})},t.render=function(){var e=t.props.tasks,n=void 0===e?[]:e;return o.a.createElement("div",{className:"todoList"},o.a.createElement("div",{className:"todoList-header"},o.a.createElement("div",{style:{display:"flex",marginBottom:"15px"}},o.a.createElement(z,{title:t.props.title,changeTodoListTitle:t.changeTodoListTitle}),o.a.createElement(V,{onClick:t.deleteTodoList})),o.a.createElement(U,{addItem:t.addTask,placeholder:"new task",isFetching:t.props.tasksIsFetching})),o.a.createElement(Y,{tasks:t.taskFilter(n),changeStatus:t.changeStatus,changeTitle:t.changeTitle,deleteTask:t.deleteTask,tasksIsFetching:t.props.tasksIsFetching}),o.a.createElement(q,{changeFilter:t.changeFilter,filterValue:t.state.filterValue}))},t}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.restoreState()}}]),n}(o.a.Component),ot=Object(d.b)(null,{getTasks:function(t){return function(e){e(et(t,!0)),A(t).then(function(n){if(!n.error){var a=n.items;e(function(t,e){return{type:X,todoListId:t,tasks:e}}(t,a)),e(et(t,!1))}})}},addTask:function(t,e){return function(n){I(e,t).then(function(t){if(0===t.resultCode){var e=t.data.item;n({type:$,newTask:e})}})}},changeTask:function(t,e){return function(n){F(t,e).then(function(t){0===t.resultCode&&n({type:"todoList/tasksReducer/CHANGE-TASK",task:t.data.item})})}},deleteTask:function(t,e){return function(n){S(t,e).then(function(a){0===a.resultCode&&n(function(t,e){return{type:"todoList/tasksReducer/DELETE-TASK",todoListId:t,taskId:e}}(t,e))})}},changeTodoListTitle:function(t,e){return function(n){j(t,e).then(function(a){0===a.resultCode&&n(function(t,e){return{type:"todoList/tasksReducer/CHANGE-TODOLIST-TITLE",todoListId:t,newTitle:e}}(t,e))})}},deleteTodoList:function(t){return function(e){C(t).then(function(n){0===n.resultCode&&e(function(t){return{type:"todoList/tasksReducer/DELETE-TODOLIST",todoListId:t}}(t))})}}})(at),rt=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).render=function(){var e=t.props.todoLists.map(function(t){return o.a.createElement(ot,{key:t.id,id:t.id,title:t.title,tasks:t.tasks,tasksIsFetching:t.taskIsFetching})});return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"headItemForm"},o.a.createElement("span",{className:"createTodoText"},"Create new TodoList"),o.a.createElement(U,{addItem:t.props.addTodoList,placeholder:"new TodoList",isFetching:t.props.todoListsIsFetching})),t.props.todoListsIsFetching?o.a.createElement(m,null):o.a.createElement("div",{className:"todoLists"},e))},t}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.getTodoLists()}}]),n}(o.a.Component),st=Object(d.b)(function(t){return{todoLists:t.todoLists.todoLists,todoListsIsFetching:t.todoLists.todoListsIsFetching}},{addTodoList:function(t){return function(e){E(t).then(function(t){if(0===t.resultCode){var n=t.data.item;e({type:"todoList/tasksReducer/ADD-TODOLIST",newTodoList:n})}})}},getTodoLists:function(){return function(t){t(tt(!0)),O().then(function(e){t({type:"todoList/tasksReducer/SET-TODOLISTS",todoLists:e}),t(tt(!1))})}}})(rt),it=n(19),ct=n(11),ut=n.n(ct),lt=function(t){var e=t.isAuthFetching,n=Object(a.useState)(t.email),r=Object(it.a)(n,2),s=r[0],i=r[1],c=Object(a.useState)(t.password),u=Object(it.a)(c,2),l=u[0],p=u[1],h=Object(a.useState)(!0),m=Object(it.a)(h,2),f=m[0],g=m[1],L=Object(d.c)();return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:ut.a.background}),o.a.createElement("div",{className:ut.a.modal},o.a.createElement("div",{className:ut.a.input},o.a.createElement("span",null,"E-mail: "),o.a.createElement("input",{type:"email",placeholder:"E-mail",value:s,onChange:function(t){i(t.currentTarget.value)}})),o.a.createElement("div",{className:ut.a.input},o.a.createElement("span",null,"Password: "),o.a.createElement("input",{type:"password",placeholder:"Password",value:l,onChange:function(t){p(t.currentTarget.value)}})),o.a.createElement("label",{className:ut.a.remember},o.a.createElement("input",{type:"checkbox",checked:f,onChange:function(t){g(t.currentTarget.checked)}}),o.a.createElement("span",null,"remember me")),o.a.createElement("button",{onClick:function(){L(function(t,e,n){return function(){var a=Object(b.a)(k.a.mark(function a(o){var r,s,i,c,u;return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o(H(!0)),a.prev=1,a.next=4,w(t,e,n);case 4:0===(r=a.sent).resultCode&&(s=r.data,i=s.id,c=s.email,u=s.login,o(R(i,c,u)),o(M(!0)),o(H(!1))),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),o(H(!1));case 11:case"end":return a.stop()}},a,null,[[1,8]])}));return function(t){return a.apply(this,arguments)}}()}(s,l,f))},disabled:e},"Login")))},dt=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).render=function(){return t.props.isAuthFetching?o.a.createElement("div",{className:"app-container"},o.a.createElement(m,null)):o.a.createElement("div",{className:"App"},!t.props.isAuth&&o.a.createElement(lt,{email:"free@samuraijs.com",password:"free",isAuthFetching:t.props.isAuthFetching}),o.a.createElement(f,{isAuth:t.props.isAuth,userLogout:t.props.userLogout}),o.a.createElement(st,null))},t}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.getUserLoginData()}}]),n}(o.a.Component),pt=Object(d.b)(function(t){return{isAuth:t.auth.isAuth,isAuthFetching:t.auth.isAuthFetching}},{getUserLoginData:function(){return function(){var t=Object(b.a)(k.a.mark(function t(e){var n,a,o,r,s;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e(H(!0)),t.prev=1,t.next=4,y();case 4:0===(n=t.sent).resultCode?(a=n.data,o=a.id,r=a.email,s=a.login,e(R(o,r,s)),e(M(!0)),e(H(!1))):"You are not authorized"===n.messages[0]&&e(H(!1)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(H(!1));case 11:case"end":return t.stop()}},t,null,[[1,8]])}));return function(e){return t.apply(this,arguments)}}()},userLogout:function(){return function(){var t=Object(b.a)(k.a.mark(function t(e){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N();case 2:0===t.sent.resultCode&&(e(R("","","")),e(M(!1)));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}})(dt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ht=n(8),mt=n(40),ft=n(41),gt=Object(ht.combineReducers)({todoLists:nt,auth:x}),kt=Object(ht.createStore)(gt,Object(ft.composeWithDevTools)(Object(ht.applyMiddleware)(mt.a)));s.a.render(o.a.createElement(d.a,{store:kt},o.a.createElement(pt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[42,1,2]]]);
//# sourceMappingURL=main.aa534f5b.chunk.js.map